---
ms.assetid: 7234DD5F-8E86-424E-99A0-93D01F1311F2
title: 使用適用於 Windows 10 行動裝置版的 Microsoft 模擬器進行測試
description: 使用「適用於 Windows 10 行動裝置版的 Microsoft 模擬器」隨附的工具來模擬與裝置的實際互動，以及測試應用程式的功能。
ms.date: 02/08/2017
ms.topic: article
keywords: windows 10, uwp
ms.localizationpriority: medium
ms.openlocfilehash: 6e20d56485ad7b5a54b9e951e8ad8ee331b5da8f
ms.sourcegitcommit: 249100d990cd5cf2854c59fa66803b7f83d5db96
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/30/2021
ms.locfileid: "105939113"
---
# <a name="test-with-the-microsoft-emulator-for-windows-10-mobile"></a>使用適用於 Windows 10 行動裝置版的 Microsoft 模擬器進行測試

使用「適用於 Windows 10 行動裝置版的 Microsoft 模擬器」隨附的工具來模擬與裝置的實際互動，以及測試應用程式的功能。 模擬器是模擬執行 Windows 10 之行動裝置的傳統型 app。 它提供虛擬化環境，讓您可以在其中針對 Windows app 進行偵錯與測試，而不需要擁有實體裝置。 它也提供隔離的環境供您的應用程式原型使用。

模擬器的設計是要提供相當於實體裝置的效能。 不過，在將應用程式發佈到 Microsoft Store 之前，建議您先在實體裝置上測試您的應用程式。

您可以針對各種螢幕解析度與螢幕大小設定，使用獨特的 Windows 10 Mobile 模擬器映像來測試您的通用應用程式。 您可以使用 Microsoft 模擬器來模擬與裝置的實際互動，並測試應用程式的各功能。

## <a name="system-requirements"></a>系統需求

您的電腦必須符合下列需求：

CPU (這些設定 (如果有的話) 可在 BIOS 中啟用)

-   硬體協助虛擬化 ([檢查相容性](https://www.microsoft.com/download/details.aspx?id=592) \(英文\))。
-   第二層位址轉譯 (SLAT)。
-   硬體型資料執行防止 (DEP)。

RAM

-   4 GB 或更多。

作業系統

-   Windows 8 或更高的版本 (強烈建議使用 Windows 10)
-   64 位元
-   Pro 版本或更高的版本

若要檢查 BIOS 需求，請參閱[如何為 Windows Phone 8 的模擬器啟用 Hyper-V](/previous-versions/windows/apps/jj863509(v=vs.105))。

若要檢查 RAM 與作業系統的需求，請在 [控制台] 中選取 [系統及安全性]  ，然後選取 [系統]  。

適用於 Windows 10 Mobile 的 Microsoft 模擬器需要 Visual Studio 2015 或更新版本，它無法與舊版 Visual Studio 回溯相容。

適用於 Windows 10 Mobile 的 Microsoft 模擬器無法載入以 Windows Phone OS 7.1 之前的 Windows Phone OS 版本為目標的應用程式。

## <a name="installing-uninstalling-and-running-the-emulator"></a>安裝、解除安裝及執行模擬器

### <a name="installing"></a>安裝
適用於 Windows 10 Mobile 的 Microsoft 模擬器隨附於 Windows 10 SDK。 安裝 Visual Studio 時也可以安裝 Windows 10 SDK 與模擬器。 請參閱 [Visual Studio 下載頁面](https://developer.microsoft.com/windows/downloads)。

您也可以使用 [Microsoft 模擬器安裝程式](https://download.microsoft.com/download/E/3/4/E347E8C5-BD79-49AF-941C-D08893A45268/emulator/EmulatorSetup.exe)來安裝適用於 Windows 10 Mobile 的 Microsoft 模擬器。

### <a name="uninstalling"></a>解除安裝

您可以使用 Visual Studio 安裝程式/修復功能來解除安裝適用於 Windows 10 Mobile 的 Microsoft 模擬器。 或者，您可以使用 [控制台]  下的 [程式和功能]  來移除模擬器。

當您解除安裝適用於 Windows 10 Mobile 的 Microsoft 模擬器時，系統並不會自動移除建立供模擬器使用的 Hyper-V 虛擬乙太網路介面卡。 您可以從 [控制台]  中的 [網路連線]  手動移除此虛擬介面卡。

### <a name="running"></a>Running

若要在模擬器中執行應用程式，只需從 Visual Studio 的 [執行]  下拉式功能表中選取模擬裝置。

![可以用於解析度、大小及記憶體的模擬器](images/em-list.png)

## <a name="whats-new-in-microsoft-emulator-for-windows-10-mobile"></a>適用於 Windows 10 Mobile 的 Microsoft 模擬器中的新增功能

除了提供對通用 Windows 平台 (UWP) 的支援之外，模擬器也新增下列功能：

-   滑鼠輸入模式支援，以區分滑鼠與單點觸控輸入。
-   NFC 支援。 模擬器可讓您模擬 NFC，並測試及開發具有 NFC/近接功能的通用 App。
-   原生硬體加速可在模擬器中使用本機顯示卡提升圖形效能。 您必須已安裝支援的顯示卡，並在模擬器的 [其他工具]  設定使用者介面的 [感應器]  索引標籤上啟用加速，才能使用加速。

## <a name="features-that-you-can-test-in-the-emulator"></a>您可以在模擬器中測試的功能

除了上一節所述的新功能，您可以測試適用於 Windows 10 行動裝置版的 Microsoft 模擬器中的下列常用功能。

-   **螢幕解析度、螢幕大小及記憶體**。 透過在各種不同的模擬器影像上測試您的應用程式，以模擬各種螢幕解析度、實際大小及記憶體限制，可將您的應用程式推廣到更廣泛的市場。

![可以用於解析度、大小及記憶體的模擬器](images/em-list.png)

-   **螢幕設定**。 將模擬器從直向變更為橫向模式。 變更縮放設定，讓模擬器符合您的桌面螢幕大小。

-   **網路功能**。 網路功能支援已與 Windows Phone 模擬器整合。 預設會啟用網路功能。 您不需為 Windows Phone 模擬器安裝網路驅動程式，或是在大多數的環境中手動設定網路功能選項。

    模擬器會使用主機電腦的網路連線。 它不會以個別裝置的形式出現在網路上。 這樣能夠消除一些使用者使用 Windows Phone SDK 8.0 模擬器時所遇到的設定問題。

-   **語言和地區設定**。 變更 Windows Phone 模擬器中的顯示語言和地區設定，藉以針對國際市場來準備您的應用程式。

    在執行中的模擬器上，移至 [設定]  應用程式，然後選取 [系統]  設定，接著選取 [語言]  或 [地區]  。 變更要測試的設定。 如果系統提示您，請按一下 [重新啟動手機]  ，套用新設定並重新啟動模擬器。

-   **應用程式週期和標記**。 在專案屬性的 [偵錯]  頁面上變更 [於偵錯時停用的標記]  選項的值，測試在停用或標記應用程式時行為。

-   **本機資料夾儲存區 (先前稱為隔離儲存區)** 。 當模擬器正在執行時，隔離儲存區中的資料會保留，但在模擬器關閉之後即會遺失。

-   **麥克風**。 要求和使用主機電腦上的麥克風。

-   **手機鍵盤**。 模擬器支援將您的開發電腦上的硬體鍵盤對應到 Windows Phone 鍵盤。 按鍵的作用就和在 Windows Phone 裝置上一樣

-   **鎖定畫面**。 當模擬器開啟時，請按電腦鍵盤上的 F12 兩次。 F12 鍵會模擬手機上的電源按鈕。 第一次按下按鍵時會關閉顯示器。 第二次按下按鍵時會再次開啟顯示器，並顯示鎖定畫面。 使用滑鼠將鎖定畫面往上滑動，即可取消鎖定畫面。

## <a name="features-that-you-cant-test-in-the-emulator"></a>您無法在模擬器中測試的功能

只能在實際裝置上測試下列功能。

-   指南針
-   迴轉儀
-   震動控制器
-   亮度。 模擬器的亮度等級一律為高。
-   高解析度視訊。 解析度高於 VGA 解析度 (640 x 480) 的影片無法正常顯示，在只有 512MB 記憶體的模擬器影像更是如此。

## <a name="mouse-input"></a>滑鼠輸入

使用 Windows 電腦上的實體滑鼠或觸控板以及模擬器工具列上的滑鼠輸入按鈕來模擬滑鼠輸入。 若應用程式為使用者提供使用滑鼠搭配 Windows 10 裝置提供輸入的功能，此功能非常實用。

點選模擬器工具列上的滑鼠輸入按鈕來啟用滑鼠輸入。 模擬器組建區塊內的任何按一下事件現在都會以滑鼠事件形式傳送到在模擬器 VM 中執行的 Windows 10 Mobile OS。

![已啟用滑鼠輸入的模擬器畫面](images/emulator-with-mouse-enabled.png)

已啟用滑鼠輸入的模擬器畫面。

![模擬器工具列上的滑鼠輸入按鈕](images/emulator-showing-mouse-input-button-bar.png)

模擬器工具列上的滑鼠輸入按鈕。

## <a name="keyboard-input"></a>鍵盤輸入

模擬器支援將您的開發電腦上的硬體鍵盤對應到 Windows Phone 鍵盤。 按鍵的作用就和在 Windows Phone 裝置上一樣。 

預設不會啟用硬體鍵盤。 這個實作是等同於滑動鍵盤，必須先部署才能使用。 啟用硬體鍵盤之前，模擬器只接受控制鍵的按鍵輸入。

模擬器不支援當地語系化版本 Windows 開發電腦之鍵盤上的特殊字元。 若要輸入出現在當地語系化鍵盤上的特殊字元，請改為使用軟體輸入面板 (SIP)。 

若要在模擬器中使用電腦的鍵盤，按 F4。

若要停止在模擬器中使用電腦的鍵盤，按 F4。

下表列出硬體鍵盤上，您可以用來模擬 Windows Phone 上的按鈕和其他控制項的按鍵。

請注意，模擬器組建 10.0.14332 中的電腦硬體鍵盤對應已變更。 下表的第二欄中的值代表這些新按鍵。 

電腦硬體按鍵 (模擬器組建 10.0.14295 及較舊) | 電腦硬體按鍵 (模擬器組建 10.0.14332 及較新) | Windows Phone 硬體按鈕 | 附註
--------------------- | ------------------------- | ----------------------------- | -----
F1 | WIN + ESC | 返回 | 長按可如預期運作。
F2 | WIN + F2 | 開始 | 長按可如預期運作。
F3 | WIN + F3 | 搜尋 |  
F4 | F4 (沒有變更) | 切換為使用或不使用本機電腦的鍵盤。 | 
F6 | WIN + F6 | 相機鍵半按 | 專用的相機按鈕按到一半。
F7 | WIN + F7 | 相機鍵全按 | 專用的相機按鈕。
F9 | WIN + F9 | 提高音量 | 
F10 | WIN + F10 | 降低音量 | 
F12 | WIN + F12 | 電源 | 按 F12 鍵兩次啟用鎖定畫面。 長按可如預期運作。
ESC | WIN + ESC | 返回 | 長按可如預期運作。
 


## <a name="near-field-communications-nfc"></a>近距離無線通訊 (NFC)

使用模擬器 [其他工具]  功能表中的 [NFC]  索引標籤，在 Windows 10 行動裝置版上建置及測試使用近距離無線通訊 (NFC) 功能的應用程式。 NFC 對於一些情節而言非常實用，包括近接情節 (例如「輕觸以分享」) 或卡片模擬 (例如「輕觸以支付」)。

您可以使用一組模擬器，透過模擬一組手機彼此輕觸來測試您的應用程式，或者您可以透過輕觸標籤來測試您的應用程式。 此外，在 Windows 10 中，行動裝置也已啟用 HCE (主機卡模擬) 功能，而且您也可以使用手機模擬器來模擬將您的裝置與付款終端機彼此輕觸以處理 APDU 命令回應流量。

NFC 索引標籤支援三種模式：

-   近接模式
-   HCE (主機卡模擬) 模式
-   智慧卡讀卡機模式

在所有模式中，模擬器視窗都有三個區域。

-   左上角區段視選取的模式而異。 此區段的功能取決於選取的模式，我們將在下面的模式特定小節詳細說明。
-   右上角區段會列出記錄檔。 當您將一組裝置彼此輕觸 (或與 POS 終端機輕觸) 時，系統會記錄輕觸事件；而當裝置結束輕觸時，系統會記錄結束輕觸事件。 此區段也會記錄您的應用程式是否在連線中斷之前回應，或您是否在模擬器 UI 中採取任何其他動作 (以及其時間戳記)。 記錄檔在模式切換時仍會保留，而且您可以隨時點選 [記錄檔]  畫面上的 [清除]  按鈕來清除記錄檔。
-   畫面下半部是訊息記錄檔，其中顯示目前所選連線上傳送或接收之訊息的文字記錄 (視選取的模式而定)。

> **重要**  第一次啟動 Tapper 工具時，您會看到 Windows 防火牆提示。 您必須選取全部 3 個核取方塊，並允許該工具通過防火牆，否則該工具會失敗，而且不會顯示任何訊息。

啟動快速啟動安裝程式之後，請確認您已按照上面的指示在防火牆提示上選取全部 3 個核取方塊。 此外，您也必須在已安裝 Microsoft 模擬器的相同實體主機電腦上安裝並使用 Tapper 工具。

### <a name="proximity-mode"></a>近接模式

若要模擬一組手機彼此輕觸，您將需要啟動一組 Windows Phone 8 模擬器。 因為 Visual Studio 不支援同時執行兩個相同的模擬器，您必須為每個模擬器選取不同的解析度，以因應此問題。

![NFC 近接頁面](images/emulator-nfc-proximity.png)

當您選取 [啟用對等裝置的探索]  核取方塊時，[對等裝置]  下拉方塊會顯示 Microsoft 模擬器 (在相同的實體主機電腦上或區域網路中執行) 與執行模擬器驅動程式的 Windows 電腦 (在相同的電腦上或區域網路中執行)。

兩個模擬器都執行之後：

-   在 [對等裝置]  清單中選取要做為目標的模擬器。
-   選取 [傳送到對等裝置]  選項按鈕。
-   按一下 [輕觸]  按鈕。 這樣會模擬兩部裝置彼此輕觸，而且您應該會聽到 NFC 輕觸通知音效
-   若要將 2 個裝置中斷連線，只要按一下 [取消輕觸]  按鈕。

或者，您可以啟用 [在 (秒) 後自動取消輕觸]  核取方塊，並在其中指定您要讓裝置輕觸的秒數，這樣裝置將會在指定的秒數過後自動取消輕觸 (模擬使用者實際操作時會遇到的情況，他們只需要短暫地輕觸手機)。 請注意，連線取消輕觸之後，目前的訊息記錄檔無法使用。

模擬從標籤讀取訊息或從另一部裝置接收訊息：

-   選取 [傳送給自己]  選項按鈕，以測試只需要一部已啟用 NFC 之裝置的情節。
-   按一下 [輕觸]  按鈕。 這樣會模擬將裝置與標籤輕觸，而且您應該會聽到 NFC 輕觸通知音效
-   若要中斷連線，只要按一下 [取消輕觸]  按鈕。

使用近接模式，您可以插入訊息，就像訊息來自標籤或另一個對等裝置。 工具可讓您傳送下列類型的訊息。

-   WindowsURI
-   WindowsMime
-   WritableTag
-   Pairing:Bluetooth
-   NDEF
-   NDEF:MIME
-   NDEF:URI
-   NDEF:wkt.U

您可以透過編輯 [承載]  視窗或在檔案中提供訊息，來建立這些訊息。 如需這些類型與其使用方式的詳細資訊，請參閱 [**ProximityDevice.PublishBinaryMessage**](/uwp/api/windows.networking.proximity.proximitydevice.publishbinarymessage) 參考頁面的＜備註＞一節。

Windows 8 驅動程式套件 (WDK) 包含驅動程式範例，此範例公開與 Windows Phone 8 模擬器相同的通訊協定。 您將需要下載 DDK、建置範例驅動程式、在 Windows 8 裝置上安裝，接著將 Windows 8 裝置的 IP 位址或主機名稱新增到裝置清單，並將它與另一部 Windows 8 裝置或 Windows Phone 8 模擬器輕觸。

### <a name="host-card-emulation-hce-mode"></a>主機卡模擬 (HCE) 模式

在主機卡模擬 (HCE) 模式中，您可以測試您的 HCE 型卡模擬應用程式，方式是撰寫您的自訂指令碼以模擬智慧卡讀卡機終端機，例如銷售點 (POS) 終端機。 此工具假設您熟悉在讀取器終端機 (例如 POS、識別卡讀取器或大眾運輸卡讀取器) 與智慧卡 (您在您的應用程式中所模擬) 之間傳送的命令回應組合 (與 ISO-7816-4 相容)。

![NFC HCE 頁面](images/emulator-nfc-hce.png)

-   按一下指令碼編輯器區段中的 [新增]  按鈕，以建立新的指令碼。 您可以提供指令碼名稱，而且可以在完成編輯之後使用 [儲存]  按鈕來儲存指令碼。
-   下次啟動模擬器時，您將可以使用儲存的指令碼。
-   按一下指令碼編輯器視窗中的 [播放]  按鈕，以執行您的指令碼。 此動作會執行模擬將您的手機與終端機輕觸並傳送您在指令碼中撰寫之命令的動作。 或者，您可以按一下 [輕觸]  按鈕，然後按一下 [播放]  按鈕，在您按一下 [播放]  之後，才會執行指令碼。
-   按一下 [停止]  按鈕以停止傳送命令，這樣會停止傳送命令到您的應用程式，但在您按一下 [取消輕觸]  按鈕之前，裝置將維持輕觸狀態。
-   在下拉式功能表中選取指令碼並按一下 [刪除]  按鈕，以刪除您的指令碼。
-   在您使用 [播放]  按鈕執行指令碼之前，模擬器工具不會檢查您的指令碼語法。 由您的指令碼傳送的訊息取決於您卡片模擬器應用程式的實作。

您也可以使用 MasterCard ([https://www.terminalsimulator.com/](https://www.terminalsimulator.com/ )) 提供的終端機模擬器工具來進行付款應用程式測試。

-   選取指令碼編輯器視窗下方的 [啟用 MasterCard]  接聽程式核取方塊，然後啟動 MasterCard 的模擬器。
-   使用該工具時，您可以產生轉送到您應用程式 (透過 NFC 工具在模擬器上執行) 的命令。

若要深入了解 HCE 支援以及如何在 Windows 10 行動裝置版中開發 HCE 應用程式，請參閱 [Microsoft NFC 小組部落格](https://blogs.msdn.com/b/nfc/)。

### <a name="how-to-create-scripts-for-hce-testing"></a>如何針對 HCE 測試建立指令碼

指令碼是以 C# 程式碼撰寫，且當您按一下 [播放]  按鈕時，會呼叫您指令碼的 Run 方法，此方法接受 IScriptProcessor 介面，此介面是用來收發 APDU 命令、輸出到記錄檔視窗，以及控制等候來自手機之 APDU 回應的逾時。

以下是可用功能的參考：

```csharp     
        public interface IScriptProcessor
        {
            // Sends an APDU command given as a hex-encoded string, and returns the APDU response
            string Send(string s);

            // Sends an APDU command given as a byte array, and returns the APDU response
            byte[] Send(byte[] s);

            // Logs a string to the log window
            void Log(string s);

            // Logs a byte array to the log window
            void Log(byte[] s);

            // Sets the amount of time the Send functions will wait for an APDU response, after which
            // the function will fail
            void SetResponseTimeout(double seconds);
        }
```

### <a name="smart-card-reader-mode"></a>智慧卡讀卡機模式

模擬器可以連線到您主機電腦上的智慧卡讀卡機裝置，如此插入或輕觸的智慧卡將顯示在您的手機 app 中，而且可以使用 [**Windows.Devices.SmartCards.SmartCardConnection**](/uwp/api/Windows.Devices.SmartCards.SmartCardConnection) 類別來與 APDU 通訊。 為了讓此功能運作，您需要將相容的智慧卡讀卡機裝置連接到您的電腦，USB 智慧卡讀卡機 (NFC/無接觸式與插入式/接觸式) 非常普及。 若要讓模擬器可搭配已連接的智慧卡讀卡機運作，請先選擇 [讀卡機]  模式 (這樣會顯示一個下拉方塊，其中列出已連接到主機系統的所有相容智慧卡讀卡機)，然後從下拉式清單中選擇要連線的智慧卡讀卡機裝置。

請注意，並非所有 NFC 相容智慧卡讀卡機都支援所有類型的 NFC 卡，而且部分不支援標準 PC/SC 儲存卡 APDU 命令。

## <a name="multi-point-input"></a>多點輸入

使用模擬器工具列上的 [多點觸控輸入]  按鈕，模擬可用於捏合及縮放、旋轉和移動瀏覽物件的多點觸控輸入。 如果您的應用程式會顯示使用者可以捏合及縮放、旋轉或移動瀏覽的相片、地圖或其他視覺元素，則這個功能非常有用。

1.  點選模擬器工具列上的 [多點觸控輸入]  按鈕來啟用多點輸入。 模擬器畫面的中心點周圍即會出現兩個觸控點。
2.  使用滑鼠右鍵按一下並拖曳其中一個觸控點來讓它們就定位，而不需觸控螢幕。
3.  使用滑鼠左鍵按一下並拖曳其中一個觸控點，以模擬捏合及縮放、旋轉或移動瀏覽。
4.  點選模擬器工具列上的 [單點輸入]  按鈕，還原為正常輸入。

下列螢幕擷取畫面顯示多點觸控輸入。

1.  左邊的小影像顯示模擬器工具列上的 [多點觸控輸入]  按鈕。
2.  中間的影像顯示在點選 [多點觸控輸入]  按鈕以顯示觸控點之後的模擬器畫面。
3.  右邊的影像顯示在拖曳觸控點以縮放影像之後的模擬器畫面。

![模擬器工具列上的多點輸入選項](images/em-multipoint.png)

## <a name="accelerometer"></a>加速計

使用模擬器 [其他工具]  的 [加速計]  索引標籤，測試可追蹤手機移動的應用程式。

您可以使用即時輸入或預先錄製的輸入來測試加速計感應器。 只有一種可用的錄製資料類型可以模擬手機的搖晃方式。 您無法針對加速計錄製或儲存您自己的模擬。

1.  在 [方向]  下拉式清單中選取所需的起始方向。

2.  -   選取輸入的類型。

        **使用即時輸入執行模擬**

        在加速計模擬器的中間，拖曳彩色的點，在 3D 平面中模擬裝置的移動方式。

        以水平存取方式來移動點，會以逐邊旋轉的方式旋轉模擬器。 以垂直存取方式來移動點，則會以前後互換的方式旋轉模擬器 (繞著 x 軸旋轉)。 當您拖曳點時，X、Y 及 Z 座標會根據旋轉計算來更新。 您無法將點移到觸控板區域中的週框圓形外部。

        您可以選擇性地按一下 [重設]  ，還原起始方向。

    -   **使用錄製的輸入執行模擬**

        在 [錄製的資料]  區段中，按一下 [播放]  按鈕，開始播放模擬的資料。 [錄製的資料]  清單中唯一可用的選項是搖動。 當模擬器播放資料時，無法在螢幕上移動。

![模擬器 [其他工具] 中的 [加速計] 頁面](images/em-accelerometer.png)

## <a name="location-and-driving"></a>定位和規劃路線

使用模擬器 [其他工具]  的 [位置]  索引標籤，測試可使用瀏覽或地理柵欄的應用程式。 若要在類似真實世界的情況中模擬開車、騎單車或步行，這個功能非常有用。

當您使用不同速度以及利用不同的準確度設定檔，模擬從某一個位置移動到另一個位置時，可以測試您的應用程式。 定位模擬器可以協助識別您在位置 API 用法中的用法變更，以改善使用者體驗。 例如，這個工具可以協助識別您必須調整地理柵欄參數 (例如，大小或停留時間)，才能在不同案例中順利偵測地理柵欄。

[位置]  索引標籤支援三種模式。 在所有模式中，當模擬器接收到新的位置時，即可使用該位置來觸發 [**PositionChanged**](/uwp/api/windows.devices.geolocation.geolocator.positionchanged) 事件，或者回應您定位感知應用程式中的 [**GetGeopositionAsync**](/uwp/api/windows.devices.geolocation.geolocator.getgeopositionasync) 呼叫。

-   在 [釘選]  模式中，您可以在地圖上放置圖釘圖示。 當您按一下 [播放所有點]  時，定位模擬器會以 [每個釘選的秒數]  文字方塊中指定的間隔，將每個釘選的位置逐一傳送到模擬器。

-   在 [即時]  模式中，您可以在地圖上放置圖釘圖示。 當您在地圖上放置釘選時，定位模擬器會立即將每個釘選的位置傳送到模擬器。

-   在 [路線]  模式中，您可以在地圖上放置圖釘圖示以表示導航點，而定位模擬器會自動計算路線。 路線包含沿線一秒間隔的隱形釘選。 例如，如果您選取 [步行]  速度設定檔，即假設每小時速度為 5 公里，則會以每 1.39 公尺的間隔方式產生隱形的釘選。 當您按一下 [播放所有點]  時，定位模擬器會使用在下拉式清單中選取的速度設定檔來判斷間隔，並將每個釘選的位置逐一傳送到模擬器。

在定位模擬器的所有模式中，您可以執行下列動作。

-   您可以使用 [搜尋]  方塊來搜尋位置。

-   您可以在地圖上 [放大]  和 [縮小]  。

-   您可以將目前設定的資料點儲存到 XML 檔案，以便日後重新載入這個檔案來重複使用相同的資料點。

-   您可以 [切換開啟或關閉圖釘模式]  和 [清除所有點]  。

在 [釘選] 和 [路線] 模式中，您也可以執行下列動作。

-   儲存您建立的路線，以供日後使用。

-   載入先前建立的路線。 您甚至可以載入舊版工具所建立的路線檔案。

-   刪除圖釘圖示 (在 [釘選] 模式中) 或導航點 (在 [路線] 模式中) 來修改路線。

**準確度設定檔**

在定位模擬器的所有模式中，您可以在 [準確度設定檔]  下拉式清單中選取下列其中一個準確度設定檔。

| 設定檔  | 說明                                        |
|----------|----------------------------------------------------|
| 固定點 | 假設完全準確的位置讀數。 這個設定並不切實際，但在測試應用程式的邏輯時非常有用。  |
| 城市    | 假設建築物受限於視線範圍內的衛星數量，但通常會有高密度的行動電話基地台，以及可用來定位的 Wi-Fi 存取點。 |
| 郊區 | 假設衛星定位相對來說比較好，而且行動電話基地台的密度良好，但是 Wi-Fi 存取點的密度不高。  |
| 鄉村    | 假設衛星定位良好，但行動電話基地台的密度低且幾乎沒有可用來定位的 Wi-Fi 存取點。 |

**速度設定檔**

在 [路線]  模式中，您可以在下拉式清單中選取下列其中一個速度設定檔。

| 設定檔 | 每小時的速度               | 每秒的速度 | 說明 | 
|---------|------------------------------|------------------|-------------|
| 速限 | 路線的速限 | 不適用   | 以公布的速限越過該路線。 |
| 步行     | 5 公里/小時                   | 1.39 公尺           | 以正常的步行速度 (5 公里/小時) 越過該路線。 |
| 騎單車      | 25 公里/小時                  | 6.94 公尺           | 以正常騎單車的速度 (25 公里/小時) 越過該路線。 |
| 快速        |                          |                  |以比公布的速限還快的速度越過該路線。 |

**路線模式**

路線模式具備下列功能與限制。

-   路線模式要求網際網路連線。

-   選取 [城市]、[郊區] 或 [鄉村] 準確度設定檔時，定位模擬器會計算以衛星為基準的模擬位置、模擬的 Wi-Fi 位置，以及每個釘選的模擬行動電話位置。 您的應用程式只能接收這其中一個位置。 適用於目前位置的這三組座標會以不同色彩顯示於地圖上和 [目前位置]  清單中。

-   沿線釘選的路線準確度並不一致。 部分釘選會使用衛星準確度、部分會使用 Wi-Fi 準確度，而部分會使用行動電話準確度。

-   您無法針對路線選取超過 20 個導航點。

-   地圖上可見釘選與隱形釘選的位置只會在您選取新的準確度設定檔時產生一次。 當您在同一個模擬器工作階段期間多次使用相同的準確度設定檔來播放該路線時，會重複使用先前產生的位置。

下列螢幕擷取畫面顯示路線模式。 橘線表示路線。 藍點表示由根據衛星定位判斷的汽車準確度位置。 紅點和綠點表示是使用 Wi-Fi 和行動電話定位及 [郊區] 準確度設定檔計算而得的較不準確的位置。 這三個計算出來的位置也會顯示於 [目前位置]  清單中。

![模擬器 [其他工具] 中的 [位置] 頁面](images/em-drive.png)

**關於定位模擬器的更多資訊**

-   您可以將準確度設為 [預設值] 來要求位置。 已經修正 Windows Phone 8 版本的定位模擬器中現有的限制，以及要求您將準確度設為 [高] 來要求位置的限制。

-   當您在模擬器中測試地理柵欄時，請建立可為地理柵欄引擎提供「暖機」期間的模擬，以了解並調整移動模式。

-   只會模擬下列位置屬性：Latitude、Longitude、Accuracy 及 PositionSource。 定位模擬器不會模擬像是 Speed、Heading 等其他屬性。

## <a name="network"></a>網路

使用模擬器 [其他工具]  的 [網路]  索引標籤，利用不同的網路速度和不同的訊號強度來測試您的應用程式。 如果您的應用程式會呼叫 Web 服務或傳輸資料，則這個功能非常有用。

網路模擬功能可協助確定您的應用程式可以在實際世界中正常運作。 Windows Phone 模擬器可在通常配有快速 WiFi 或乙太網路連線的電腦上執行。 不過，您的應用程式可以在一般透過速度較慢的行動電話連線來連線的手機上執行。

1.  檢查 [啟用網路模擬]  ，利用不同的網路速度和不同的訊號強度來測試您的應用程式。
2.  在 [網路速度]  下拉式清單中，選取下列其中一個選項：
    -   沒有網路
    -   2G
    -   3G
    -   4G

3.  在 [訊號強度]  下拉式清單中，選取下列其中一個選項：
    -   正確
    -   平均
    -   不佳

4.  清除 [啟用網路模擬]  以還原預設行為，預設行為會使用開發電腦的網路設定。

您也可以在 [網路]  索引標籤中檢閱目前的網路設定。

![模擬器 [其他工具] 中的 [網路] 頁面](images/em-network.png)

## <a name="sd-card"></a>SD 記憶卡

使用模擬器 [其他工具]  的 [SD 記憶卡]  索引標籤，利用模擬的卸除式 SD 記憶卡來測試您的應用程式。 如果您的 app 會讀取或寫入檔案，則這個功能非常有用。

![模擬器 [其他工具] 中的 [SD 記憶卡] 頁面](images/em-sdcard.png)

[SD 記憶卡]  索引標籤使用開發電腦上的資料夾來模擬手機上的卸除式 SD 記憶卡。

1.  **選取資料夾**。

    按一下 [瀏覽]  以挑選開發電腦上的資料夾，來保留模擬的 SD 記憶卡內容。

2.  **插入 SD 記憶卡**。

    選取資料夾之後，按一下 [插入 SD 記憶卡]  。 當您插入 SD 記憶卡時，會發生下列情況：

    -   如果未指定資料夾或是資料夾無效，即會發生錯誤。
    -   位於開發電腦上指定資料夾中的檔案會複製到模擬器上模擬的 SD 記憶卡的根資料夾中。 進度列會指出同步操作的進度。
    -   [插入 SD 記憶卡]  按鈕會變更為 [退出 SD 記憶卡]  。
    -   如果您在同步操作正在進行的同時按一下 [退出 SD 記憶卡]  ，操作即會取消。

3.  您可以選擇性地選取或清除 [當我退出 SD 記憶卡時將更新的檔案同步到本機資料夾]  。

    此選項預設為啟用。 啟用這個選項時，若您退出 SD 記憶卡，即會將檔案從模擬器同步到開發電腦上的資料夾。

4.  **退出 SD 記憶卡**。

    按一下 [退出 SD 記憶卡]  。 當您退出 SD 記憶卡時，會發生下列情況：

    -   如果已選取 [當我退出 SD 記憶卡時將更新的檔案同步到本機資料夾]  ，即會發生下列情況：
        -   位於模擬器中模擬的 SD 記憶卡上的檔案會複製到開發電腦上指定的資料夾。 進度列會指出同步操作的進度。
        -   [退出 SD 記憶卡]  按鈕會變更為 [取消同步]  。
        -   如果您在同步操作正在進行的同時按一下 [取消同步]  ，即會退出記憶卡，而同步操作的結果是不完整的。
    -   [退出 SD 記憶卡]  按鈕會變更回 [插入 SD 記憶卡]  。

> **注意**  由於手機使用的 SD 記憶卡是以 FAT32 檔案系統進行格式化，因此大小上限為 32GB。

系統會對從模擬的 SD 記憶卡讀取和寫入的速度進行流速控制，以模擬真實世界的速度。 存取 SD 記憶卡的速度會比存取電腦硬碟還要慢。

## <a name="notifications"></a>通知

使用模擬器 [其他工具]  的 [通知]  索引標籤，將推播通知傳送到您的應用程式。 如果您的應用程式會接收推播通知，則這個功能非常有用。

您可以輕鬆測試推播通知，而不需建立在發佈應用程式之後所需的工作雲端服務。

1.  **啟用模擬。**

    選取 [已啟用]  之後，模擬器上部署的所有應用程式都會使用模擬引擎，而不是 WNS 或 MPN 服務，直到您停用模擬為止。

2.  **選取要接收通知的應用程式。**

    系統會使用所有部署到模擬器 (已針對推播通知啟用) 的應用程式自動填入 [AppId]  清單。 從下拉式清單中選取應用程式。

    如果您在啟用模擬之後部署其他具備推播功能的 app，請按一下 [重新整理]  ，將該 app 新增到清單中。

3.  **選取通知通道。**

    當您在 [AppId]  清單中選取應用程式之後，系統會使用已向選取的應用程式登錄的所有通知通道自動填入 [URI]  清單。 從下拉式清單中選取通知通道。

4.  **選取通知類型。**

    當您在 [URI]  清單中選取通知通道之後，系統會使用所有可供通知服務使用的類型自動填入 [通知類型]  清單。 從下拉式清單中選取通知類型。

    模擬器會使用通知通道的 URI 格式，判斷應用程式是否正在使用 WNS 或 MPN 推播通知。

    模擬支援所有通知類型。 預設通知類型為 [磚]  。

    -   下列是支援的 WNS 通知類型。

        -   原始
        -   快顯通知

            當您的應用程式使用 WNS 通知且您選取 [快顯通知]  通知類型時，模擬索引標籤會顯示 [標記]  和 [群組]  欄位。 您可以選取這些選項並輸入 [標記]  和 [群組]  值，以管理通知中心內的快顯通知。

        -   磚
        -   Badge

    -   下列是支援的 MPN 通知類型。

        -   原始
        -   快顯通知
        -   磚

5.  **選取通知範本。**

    當您在 [通知類型]  清單中選取通知類型之後，系統會使用所有可供通知類型使用的範本自動填入 [範本]  清單。 從下拉式清單中選取範本。

    模擬支援所有範本類型。

6.  **您可以選擇性地變更通知承載。**

    當您在 [範本]  清單中選取範本之後，系統會使用範本的承載範例自動填入 [通知承載]  文字方塊。 檢閱 [通知承載]  文字方塊中的承載範例。

    -   您可以傳送承載範例，而不需加以變更。

    -   您可以在文字方塊中編輯承載範例。

    -   您可以按一下 [載入]  ，以從文字檔或 XML 檔中載入承載。

    -   您可以按一下 [儲存]  ，以儲存承載的 XML 文字供日後再次使用。

    模擬器不會驗證承載的 XML 文字。

7.  **傳送推播通知。**

    按一下 [傳送]  ，將推播通知傳遞到選取的應用程式。

    螢幕會顯示訊息，指出成功或失敗。

![模擬器 [其他工具] 中的 [通知] 頁面](images/em-notifications.png)

## <a name="sensors"></a>感應器

使用模擬器 [其他工具]  的 [感應器]  索引標籤，測試應用程式如何在低成本的手機上運作，這類手機並未配備所有的選用感應器或相機功能。 如果應用程式會使用相機或手機的某些感應器，而您想要將應用程式盡可能推廣到最廣泛的市場，則這個功能非常有用。

-   根據預設，會啟用 [選用感應器]  清單中的所有感應器。 選取或清除個別核取方塊，以啟用或停用個別的感應器。
-   變更選項之後，請按一下 [套用]  。 接著必須重新啟動模擬器。
-   如果您進行變更，接著切換索引標籤或者不以按一下 [套用]  的方式關閉 [其他工具]  視窗，則系統會捨棄變更。
-   從模擬器工作階段一直到您變更設定或重設的這段期間，均會保留您的設定。 如果您擷取檢查點，即會使用該檢查點來儲存設定。 設定僅會針對您正在使用的特定模擬器加以保留，例如，**Emulator 8.1 WVGA 4" 512MB**。

![模擬器 [其他工具] 中的 [感應器] 頁面](images/em-sensors.png)

**感應器選項**

您可以啟用或停用下列選用的硬體感應器：

-   周遭環境光感應器
-   前方相機
-   迴轉儀
-   指南針 (磁力儀)
-   NFC
-   軟體按鈕 (僅存在於某些高解析度的模擬器影像中)

**相機選項**

您可以選取或清除 [選用感應器]  清單中的核取方塊來啟用或停用選用的前方相機。

您也可以在 [相機]  下拉式清單中，選取下列其中一個相機設定檔。

-   Windows Phone 8.0 相機。
-   Windows Phone 8.1 相機。

下列為每個設定檔所支援的相機功能清單。

| 功能            | Windows Phone 8.0 相機 | Windows Phone 8.1 相機  |
|--------------------|--------------------------|---------------------------|
| 解決方法         | 640 x 480 (VGA)          | 640 x 480 (VGA) 或更佳 |
| 自動對焦          | 是                      | 是                       |
| 閃光燈              | 否                       | 是                       |
| 縮放               | 2x (數位或光學)  | 2x (數位或光學)   |
| 影片解析度   | 640 x 480 (VGA)          | 640 x 480 (VGA) 或更佳 |
| 預覽解析度 | 640 x 480 (VGA)          | 640 x 480 (VGA)           |

## <a name="frame-rate-counters"></a>畫面播放速率計數器

使用 Windows Phone 模擬器中的畫面播放速率計數器，監視執行中應用程式的效能。

![Windows Phone 模擬器中的畫面播放速率計數器](images/em-frameratecounters.PNG)

**畫面播放速率計數器的描述**

下表說明每個畫面播放速率計數器。

| 畫面播放速率計數器                           | 說明        |
|----------------------------------------------|--------------------|
| 撰寫 (轉譯) 執行緒畫面播放速率 (FPS) | 用來更新畫面的速率。  |
| 使用者介面執行緒畫面播放速率 (FPS)       | 用來執行 UI 執行緒的速率。    |
| 紋理記憶體使用量                         | 應用程式中所使用之紋理的視訊記憶體和系統記憶體複本。    |
| 表面計數器                              | 明確傳送到 GPU 進行處理的表面數量。     |
| 中繼表面計數器                 | 產生做為快取表面結果的隱含表面數目。    |
| 畫面填滿速率計數器                     | 就螢幕而言，每個畫面繪製的像素數目。 值為 1 表示目前螢幕解析度中的像素數目，例如，480 x 800 像素。 |

**啟用及停用畫面播放速率計數器**

您可以在程式碼中啟用或停用畫面播放速率計數器的顯示。 當您在 Visual Studio 中建立 Windows Phone 應用程式專案時，預設會將下列啟用畫面播放速率計數器的程式碼新增到 App.xaml.cs 檔案中。 若要停用畫面播放速率計數器，請將 **EnableFrameRateCounter** 設定為 **false**，或將該行程式碼標記為註解。

> [!div class="tabbedCodeSnippets"]
>```csharp
>// Show graphics profiling information while debugging.
>if (System.Diagnostics.Debugger.IsAttached)
>{
>    // Display the current frame rate counters.
>    Application.Current.Host.Settings.EnableFrameRateCounter = true;
>    
>    // other code…
>}
>```
>```vb
>' Show graphics profiling information while debugging.
>If System.Diagnostics.Debugger.IsAttached Then
>
>    ' Display the current frame rate counters.
>    Application.Current.Host.Settings.EnableFrameRateCounter = True
>
>    ' other code...
>End If
>```

## <a name="known-issues"></a>已知問題

以下是關於模擬器的已知問題，以及當您遇到這類問題時該如何解決的建議方法。

### <a name="error-message-failed-while-removing-virtual-ethernet-switch"></a>錯誤訊息：「移除虛擬乙太網路交換器時發生錯誤」

在某些情況下 (包括在您更新為新的 Windows 10 正式發行前小眾測試版之後)，與模擬器相關聯的虛擬網路交換器會進入無法透過使用者介面刪除它的狀態。

若要從此情況中復原，請從系統管理員命令提示字元執行 "netcfg -d"：`C:\Program Files (x86)\Microsoft XDE\<version>\XdeCleanup.exe`。 當命令完成執行時，需重新啟動電腦，才能完成修復程序。

**注意**  這個命令將會刪除所有網路裝置，而不只是與模擬器相關聯的裝置。 當您的電腦重新啟動時，將會自動探索所有硬體網路裝置。
 
### <a name="unable-to-launch-the-emulators"></a>無法啟動模擬器

Microsoft 模擬器包含 XDECleanup.exe，這是一個工具，可刪除所有的 VM、差異磁碟及模擬器特定的網路交換器，而它已經隨附於模擬器 (XDE) 二進位檔中。 如果模擬器 VM 進入錯誤狀態，您應該使用這個工具來清除這些 VM。 請從系統管理員命令提示字元執行此工具：`C:\Program Files (x86)\Microsoft XDE\<version>\XdeCleanup.exe`

> **注意**  XDECleanup.exe 會刪除所有模擬器特定的 Hyper-V VM，而且也會刪除任何的 VM 檢查點或儲存狀態。

### <a name="uninstall-windows-10-for-mobile-image"></a>解除安裝 Windows 10 行動裝置版映像

當您安裝模擬器時，即會安裝 Windows 10 行動裝置版 VHD 映像，它在控制台的 [程式和功能]  清單中會有自己的項目。 如果您想要解除安裝該映像，可在安裝的程式清單中尋找 [Windows 10 行動裝置版映像 - \<version\>]、在其上按一下滑鼠右鍵，然後選擇 [解除安裝]。

在目前版本中，您接著必須手動刪除模擬器的 VHD 檔案。 若您將模擬器安裝至預設路徑，則 VHD 檔案會位於 C:\\Program Files (x86)\\Windows Kits\\10\\Emulation\\Mobile\\\<version\>\\flash.vhd。

### <a name="how-to-disable-hardware-accelerated-graphics"></a>如何停用硬體加速圖形

根據預設，Windows 10 行動裝置版模擬器會使用硬體加速圖形。 如果您無法啟動已啟用硬體加速的模擬器，您可以藉由設定登錄值將它關閉。

若要停用硬體加速：

1. 啟動 [登錄編輯程式]。
2. 如果下列登錄子機碼不存在，請建立一個︰HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Xde\10.0
3. 以滑鼠右鍵按一下 10.0 資料夾，指向 [新增]  ，然後按一下 [DWORD 值]  。
4. 輸入 **DisableRemoteFx**，然後按 Enter 鍵。
5. 按兩下 **DisableRemoteFx**，在 [值]  資料方塊中輸入 1，選取 [十進位]  選項，然後按一下 [確定]  。
6. 關閉登錄編輯器。

**注意︰** 設定此登錄值之後，您必須在 Hyper-V 管理員中針對您在 Visual Studio 中啟動的組態刪除虛擬機器，然後以軟體呈現的圖形重新啟動模擬器。

## <a name="support-resources"></a>支援資源

若要尋找使用 Windows 10 工具遇到的問題及解決問題，請瀏覽 [Windows 10 工具論壇](https://social.msdn.microsoft.com/Forums/en-US/home?forum=Win10SDKToolsIssues)。 若要查看所有 Windows 10 開發論壇，請瀏覽[此連結](https://social.msdn.microsoft.com/Forums/windowsapps/en-US/home?forum=wpdevelop)。

## <a name="related-topics"></a>相關主題

* [在模擬器中執行 Windows Phone 應用程式](/visualstudio/debugger/run-windows-phone-apps-in-the-emulator?view=vs-2015&preserve-view=true)
* [Windows 和 Windows Phone SDK 封存](https://developer.microsoft.com/windows/downloads/sdk-archive)
 
